generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Account {
  id                   String        @id
  password             String
  balance              Float?        @default(0)
  user                 User?
  sentTransactions     Transaction[] @relation("SenderTransaction")
  receivedTransactions Transaction[] @relation("ReceiverTransaction")
}

model User {
  id          Int     @id @default(autoincrement())
  name        String
  gender      String
  address     String
  nrc         Nrc?
  account     Account @relation(fields: [phoneNumber], references: [id])
  phoneNumber String  @unique
}

model Nrc {
  id             Int    @id @default(autoincrement())
  state          String
  district       String
  registerNumber String
  user           User   @relation(fields: [userId], references: [id])
  userId         Int    @unique
}

model Transaction {
  id         String   @id @default(uuid())
  amount     Float
  date       DateTime
  sender     Account  @relation("SenderTransaction", fields: [senderId], references: [id])
  senderId   String
  receiver   Account  @relation("ReceiverTransaction", fields: [receiverId], references: [id])
  receiverId String
}
